<%= form_for(product) do |f| %>
  <% if product.errors.any? %>
    <div id="error_explanation" class="card-panel red white-text">
      <h5><%= t('errors.template.header')  %>:</h5>

      <ul>
      <% product.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
<div class="card-panel row">
  
  <div class="input-field col s12">

    <%= f.label  :name %>
    <%= f.text_field :name, required: true %>
    
  </div>

  <div class="input-field  col s12">

    <%= f.label  :uuid %>
    <%= f.text_field :uuid %>
    
  </div>

  <div class="input-field col s12">

    <%= f.label  :details %>
    <%= f.text_area :details, class:"materialize-textarea" %>
    
  </div>

  <div class="input-field col s6">
    <div class="row">
      <div class="col s10">
        <%= f.select :product_category_id, @categories, {prompt: true}, required: true  %>
        <%= f.label  :product_category_id %>
      </div>
      <div class="col s2">
        <a 
          class="btn btn-floating waves-effect indigo waves-light left modal-trigger tooltipped" 
          data-position="left" 
          data-tooltip="New category" 
          href="#category-add-modal">
            <i class="material-icons">person_add</i>
        </a>
      </div>
    </div>
    
  </div>

  <div class="input-field col s6">
    <div class="row">
      <div class="col s10">
        <%= f.select :supplier_id, @suppliers, {prompt: true}, required: true  %>
        <%= f.label  :supplier_id %>
      </div>
      <div class="col s2">
        <a 
          class="btn btn-floating waves-effect indigo waves-light left modal-trigger tooltipped" 
          data-position="left" 
          data-tooltip="New supplier" 
          href="#supplier-add-modal">
            <i class="material-icons">person_add</i>
        </a>
      </div>
    </div>
  </div>

  <div class="input-field col s12">
    <%= f.select :calculation_formula_id, @formulas, {prompt: true} %>
    <%= f.label  :calculation_formula_id %>

  </div>

  <div class="input-field col s6">

    <%= f.label  :customer_price %>
    <%= f.number_field :customer_price, step: :any%>
    
  </div>

  <div class="input-field col s6">

    <%= f.label  :cost_price %>
    <%= f.number_field :cost_price, step: :any%>
    
  </div>

  <div class="input-field col s12">

    <%= f.label  :area_covered %>
    <%= f.number_field :area_covered , step: :any%>
    
  </div>

  <div class="file-field input-field col s12">
    <div class="btn">
      <span><%= f.label  :photo %></span>
      <%= f.file_field :photo %>
      <%= f.hidden_field :photo_cache %>
    </div>
    <div class="file-path-wrapper">
      <input class="file-path validate" type="text">
    </div>
  </div>

  <div class="input col s12">


    <label>
      <input type="checkbox" name="product[tax]" id="product_tax" />
      <span><%= f.label  :tax %></span>
    </label>

    
  </div>



    <div class="other-field col s12">
      <%= f.label :suggestion_ids %>
      <%= f.select :suggestion_ids, options_for_select(@products, product.suggestions.pluck(:suggestion_id)),{:include_hidden => false},{ multiple: true, class: "select2-size-sm browser-default"} %>
    </div>

</div>
  <div class="actions row mt-1">
    <div class="col s12">
      <%= f.submit t('button.save'), class:"btn" %>
    </div>
  </div>
<% end %>

<%=  content_for :scripts do %>
  <script type="text/javascript" charset="utf-8">
      $( document ).ready(function() {
          $('.select2-size-sm').select2({
              dropdownAutoWidth: true,
              width: '100%',
              containerCssClass: 'select-sm'
          });
      });
  </script>
<% end %>