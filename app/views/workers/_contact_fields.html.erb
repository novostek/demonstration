<div class="row nested-fields">

  <div class="input-field col l6 s12">
    <%= f.label :title %>
    <%= f.text_field :title %>
  </div>
  <div class="input-field col l6 s12">

    <%= f.select :category, Contact.category.options , {prompt: true}, {id:"category_#{f.index}_",onchange:"category_change('_#{f.index}_')" } %>
    <%= f.label :category %>
  </div>


  <div class="hide col s12" id="address_div">

    <%= f.fields_for :data do |field| %>
        <div class="input-field">
          <%= field.label :address %>
          <%= field.text_field :address %>
        </div>
        <div class="input-field">
          <%= field.label :zipcode %>
          <%= field.text_field :zipcode%>
        </div>
        <div class="input-field">
          <%= field.label :city %>
          <%= field.text_field :city %>
        </div>
        <div class="input-field">
          <%= field.label :state %>
          <%= field.text_field :state %>
        </div>
        <div class="input-field">
          <%= field.label :lat %>
          <%= field.text_field :lat %>
        </div>
        <div class="input-field">
          <%= field.label :lng %>
          <%= field.text_field  :lng %>
        </div>
    <% end %>

        <!--<div class="input-field">-->
          <!--<%= f.label :address %>-->
          <!--<%= text_field_tag "contacts_attributes[#{f.index}][value][address]" %>-->
        <!--</div>-->
        <!--<div class="input-field">-->
          <!--<%= f.label :zipcode %>-->
          <!--<%= text_field_tag "contacts_attributes[#{f.index}][value][zipcode]" %>-->
        <!--</div>-->
        <!--<div class="input-field">-->
          <!--<%= f.label :city %>-->
          <!--<%= text_field_tag "contacts_attributes[#{f.index}][value][city]" %>-->
        <!--</div>-->
        <!--<div class="input-field">-->
          <!--<%= f.label :state %>-->
          <!--<%= text_field_tag "contacts_attributes[#{f.index}][value][state]" %>-->
        <!--</div>-->
        <!--<div class="input-field">-->
          <!--<%= f.label :lat %>-->
          <!--<%= text_field_tag "contacts_attributes[#{f.index}][value][lat]" %>-->
        <!--</div>-->
        <!--<div class="input-field">-->
          <!--<%= f.label :lng %>-->
          <!--<%= text_field_tag "contacts_attributes[#{f.index}][value][lng]" %>-->
        <!--</div>-->


  </div>

  <div class="hide col s12" id="phone_div">
    telefone
  </div>

  <div class="hide col s12" id="email_div">
    email
  </div>



  <div class="col s12 l2">
    <%= link_to_remove_association  f, class: "btn waves-effect waves-light red left white-text" do %>
        <i class="material-icons left">remove_circle</i> <%= t "button.delete" %>
    <% end %>
  </div>

</div>

<%= content_for :scripts do %>
    <script type="text/javascript" charset="utf-8">
        function category_change(index)
        {
            var category = $("#category"+index).val();
            if(category == "address")
            {
                $("#address_div").removeClass("hide");
                $("#phone_div").addClass("hide");
                $("#email_div").addClass("hide");
            }
            if(category == "phone")
            {
                $("#address_div").addClass("hide");
                $("#phone_div").removeClass("hide");
                $("#email_div").addClass("hide");
            }
            if(category == "email")
            {
                $("#address_div").addClass("hide");
                $("#phone_div").addClass("hide");
                $("#email_div").removeClass("hide");
            }

        }
    </script>
<% end %>

